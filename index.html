<h2>Historial de ventas</h2>
<ul id="listaVentas"></ul>

<html><body><h1>Bienvenida a PanaderiaApp</h1></body></html> 
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>PanaderíaApp</title>
  </head>
  <body>
    <h1>Bienvenida a PanaderíaApp</h1>

    <form id="productoForm">
      <label>Nombre del producto:</label><br>
      <input type="text" name="nombre" required><br><br>

      <label>Precio:</label><br>
      <input type="number" name="precio" required><br><br>

      <button type="submit">Registrar producto</button>
    </form>

    <p id="respuesta"></p>

    <script>
  async function cargarVentas() {
    try {
      const res = await fetch('http://localhost:3000/ventas');
      const ventas = await res.json();
      const lista = document.getElementById('listaVentas');
      lista.innerHTML = '';
      ventas.forEach(v => {
        const item = document.createElement('li');
        const fecha = new Date(v.fecha).toLocaleString();
        item.textContent = `${fecha} - ${v.producto} x${v.cantidad}`;
        lista.appendChild(item);
      });
    } catch (error) {
      console.error('Error al cargar ventas:', error);
    }
  }

  const form = document.getElementById('productoForm');
  const respuesta = document.getElementById('respuesta');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const datos = {
      nombre: form.nombre.value,
      precio: parseFloat(form.precio.value)
    };

    try {
      const res = await fetch('http://localhost:3000/productos', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(datos)
      });

      const resultado = await res.json();
      respuesta.textContent = '✅ Producto registrado: ' + resultado.nombre;
      form.reset();
      cargarVentas(); // Actualiza ventas después de registrar producto
    } catch (error) {
      respuesta.textContent = '❌ Error al registrar el producto';
    }
  });

  cargarVentas(); // Carga ventas al iniciar
</script>